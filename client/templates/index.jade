extends layout

block content
  #main-section.clearfix
    .window.chat_window.hidden
      .chat
      .main_buttons
        .section
          .button.big.find_battle
            span.find-icon.icon-earth
            |  Find battle
          .find_battle_select_team
        .section
          .button.teambuilder_button
            span.icon-pencil
            |  Teambuilder
        .section
          .button.display_credits Credits
    #teambuilder-section.window.hidden
    #battle-list-section.window.hidden
  #messages.z2

block footer
  .loading-container
    .loading-message Loading...
  script(src=asset_path('js/data.js'))
  script(src=asset_path('js/vendor.js'))
  script(src=asset_path('js/templates.js'))
  script(src=asset_path('js/app.js'))
  script.
    // Autogenerated client version
    PokeBattle.CLIENT_VERSION = "#{CLIENT_VERSION}";
    // quicker click response on mobile devices
    $(document).ready(function() {
      FastClick.attach(document.body);
    });

    //- Authentication
    (function() {
      var TOKEN = "#{user.token}";
      var ID = #{user.id};
      var USERNAME = "#{user.name}"

      PokeBattle.userId = ID;
      PokeBattle.username = USERNAME;
      PokeBattle.primus.on('open', function() {
        PokeBattle.primus.send('login', ID, TOKEN);
      });
    }).call(this);
